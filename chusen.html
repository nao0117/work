<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <title>slot machine</title>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <main>
            <div class="x1">
                <div>
                    <input type="text" id="c1" placeholder="0">
                    <button type="button" id="b1">stop</button>
                </div>
                <div>
                    <input type="text" id="c2" placeholder="0">
                    <button type="button" id="b2">stop</button>
                </div>
                <div>
                    <input type="text" id="c3" placeholder="0">
                    <button type="button" id="b3">stop</button>
                </div>
            </div>
            <div class="startbutton">
                <button type="button" id="a">start</button>
            </div>
        </main>
    </body>
    <script>
        var a = document.getElementById('a');
        var b1 = document.getElementById('b1');
        var b2 = document.getElementById('b2');
        var b3 = document.getElementById('b3');
        var c1 = document.getElementById('c1');
        var c2 = document.getElementById('c2');
        var c3 = document.getElementById('c3');
        var t1 = null;
        var t2 = null;
        var t3 = null;

        document.getElementById("a").onclick = function start() {
            if (t1) {
                clearInterval(t1);
            }
            if (t2) {
                clearInterval(t2);
            }
            if (t3) {
                clearInterval(t3);
            }
            //c1.value = Math.floor(Math.random() * 101);
            //c2.value = Math.floor(Math.random() * 101);
            //c3.value = Math.floor(Math.random() * 101);
            t1 = setInterval(function () {
                c1.value = Math.floor(Math.random() * 99)+1;
            }, 50);
            t2 = setInterval(function () {
                c2.value = Math.floor(Math.random() * 99)+1;
            }, 50);
            t3 = setInterval(function () {
                c3.value = Math.floor(Math.random() * 99)+1;
            }, 50);
        }

        document.getElementById("b1").onclick = function stop1() {
            if (t1) {
                clearInterval(t1);
                t1 = null;
            }
            check();
        }

        document.getElementById("b2").onclick = function stop2() {
            if (t2) {
                clearInterval(t2);
                t2 = null;
            }
            check();
        }

        document.getElementById("b3").onclick = function stop3() {
            if (t3) {
                clearInterval(t3);
                t3 = null;
            }
            check();
        }

        function check() {
            if (!t1 && !t2 && !t3) {
                if (c1.value == c2.value || c1.value == c3.value || c2.value == c3.value) {
                    a.addEventListener('click', start);
//alert('あたり！');
                } else {
                    Sleep(1000);
                }
            }
        }
        function Sleep( milli_second )
        {
            var start = new Date();
            while( new Date() - start < milli_second );
        }

        a.addEventListener('click', start);
        b1.addEventListener('click', stop1);
        b2.addEventListener('click', stop2);
        b3.addEventListener('click', stop3);

        start();
    </script>
</html>
